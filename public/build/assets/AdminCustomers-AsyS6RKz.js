import{a as M}from"./adminPaginationMixin-DN7Wb3ng.js";import{c as B}from"./validationRules-D8HGgtlI.js";import{_ as A,d as N,w as n,a as t,r as a,f,t as c,g as z,b as l,o as h,e as T,c as y,F as I,h as P}from"./app-CHlE1Mvy.js";const L={name:"CustomerDialog",props:{modelValue:{type:Boolean,default:!1},customer:{type:Object,default:null}},emits:["update:modelValue","save","cancel"],data(){return{activeTab:"basic",saving:!1,backendErrors:{},form:{name:"",code:"",company_name:"",email:"",phone:"",mobile:"",address:"",city:"",state:"",country:"",postal_code:"",tax_id:"",opening_balance:0,notes:"",is_active:!0}}},computed:{rules(){return B(this,"name")},dialogModel:{get(){return this.modelValue},set(o){this.$emit("update:modelValue",o)}},editingCustomer(){return this.customer!==null}},watch:{customer:{handler(o){this.activeTab="basic",o?this.form={name:o.name||"",code:o.code||"",company_name:o.company_name||"",email:o.email||"",phone:o.phone||"",mobile:o.mobile||"",address:o.address||"",city:o.city||"",state:o.state||"",country:o.country||"",postal_code:o.postal_code||"",tax_id:o.tax_id||"",opening_balance:o.opening_balance||0,notes:o.notes||"",is_active:o.is_active!==void 0?o.is_active:!0}:this.resetForm()},immediate:!0},dialogModel(o){o&&!this.editingCustomer&&this.$nextTick(()=>{!this.form.code&&this.form.name&&this.generateCodeFromName()})},"form.name"(o,e){o&&o.trim().length>3&&(!this.form.code||!this.form.code.trim())&&this.$nextTick(()=>{this.generateCodeFromName()})},"form.code"(o){!o&&this.form.name&&this.form.name.trim().length>3&&this.$nextTick(()=>{this.generateCodeFromName()})}},methods:{handleNameInput(){this.form.name&&this.form.name.trim().length>3&&(!this.form.code||!this.form.code.trim())&&this.$nextTick(()=>{this.generateCodeFromName()})},generateCodeFromName(o=!1){if(!this.form.name||!this.form.name.trim()||!o&&this.form.code&&this.form.code.trim())return;const e=this.form.name.replace(/[^A-Za-z]/g,"");if(!e||e.length===0){this.form.code="CUS-XXX";return}let m="";if(e.length>=3)m=e.substring(0,3).toUpperCase();else{m=e.toUpperCase();const C=m[0]||"X";for(;m.length<3;)m+=C}this.form.code=`CUS-${m}`},async generateCode(){this.generateCodeFromName()},manualGenerateCode(){this.form.name&&this.form.name.trim().length>3&&this.generateCodeFromName(!0)},resetForm(){this.form={name:"",code:"",company_name:"",email:"",phone:"",mobile:"",address:"",city:"",state:"",country:"",postal_code:"",tax_id:"",opening_balance:0,notes:"",is_active:!0},this.backendErrors={},this.$refs.form&&this.$refs.form.resetValidation()},async onSave(){var o,e,m,C;if(this.$refs.form.validate()){this.backendErrors={},this.saving=!0;try{const r=localStorage.getItem("admin_token"),s=(o=this.customer)==null?void 0:o.id;if(this.editingCustomer&&!s)throw new Error("Customer ID is missing. Cannot update customer.");const p=s?`/api/v1/customers/${s}`:"/api/v1/customers",_=s?"put":"post";await this.$axios[_](p,this.form,{headers:{Authorization:`Bearer ${r}`}}),this.$emit("save",{data:this.form,isEditing:!!s})}catch(r){if(((e=r.response)==null?void 0:e.status)===422&&((C=(m=r.response)==null?void 0:m.data)!=null&&C.errors)){this.backendErrors=r.response.data.errors;const s=[];Object.keys(this.backendErrors).forEach(_=>{(Array.isArray(this.backendErrors[_])?this.backendErrors[_]:[this.backendErrors[_]]).forEach(u=>{s.push(`${this.formatFieldName(_)}: ${u}`)})});const p=s.length>0?s.join("<br>"):"Please fix the validation errors in the form";this.showError(p),this.$nextTick(()=>{this.$refs.form&&this.$refs.form.validate()})}else this.$emit("error",r)}finally{this.saving=!1}}},formatFieldName(o){return o.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")},showError(o){window.Toast?window.Toast.fire({icon:"error",title:"Validation Error",html:o}):window.Swal?window.Swal.fire({icon:"error",title:"Validation Error",html:o}):alert(o)},getFieldError(o){return this.backendErrors[o]?Array.isArray(this.backendErrors[o])?this.backendErrors[o][0]:this.backendErrors[o]:null},clearFieldError(o){this.backendErrors[o]&&(delete this.backendErrors[o],this.$forceUpdate())},onCancel(){this.resetForm(),this.$emit("cancel")}}},j={class:"pa-4"},X={class:"pa-4"},q={class:"pa-4"};function G(o,e,m,C,r,s){const p=a("v-card-title"),_=a("v-tab"),V=a("v-tabs"),u=a("v-text-field"),g=a("v-btn"),x=a("v-switch"),b=a("v-window-item"),E=a("v-textarea"),v=a("v-col"),k=a("v-row"),w=a("v-window"),F=a("v-form"),U=a("v-card-text"),D=a("v-spacer"),d=a("v-card-actions"),S=a("v-card"),O=a("v-dialog");return h(),N(O,{modelValue:s.dialogModel,"onUpdate:modelValue":e[25]||(e[25]=i=>s.dialogModel=i),"max-width":"800",scrollable:"",persistent:""},{default:n(()=>[t(S,null,{default:n(()=>[t(p,null,{default:n(()=>[f(c(s.editingCustomer?"Edit Customer":"New Customer"),1)]),_:1}),t(U,null,{default:n(()=>[t(F,{ref:"form",onSubmit:z(s.onSave,["prevent"])},{default:n(()=>[t(V,{modelValue:r.activeTab,"onUpdate:modelValue":e[0]||(e[0]=i=>r.activeTab=i),"bg-color":"grey-lighten-4"},{default:n(()=>[t(_,{value:"basic"},{default:n(()=>e[26]||(e[26]=[f("Basic Information")])),_:1,__:[26]}),t(_,{value:"contact"},{default:n(()=>e[27]||(e[27]=[f("Contact Details")])),_:1,__:[27]}),t(_,{value:"financial"},{default:n(()=>e[28]||(e[28]=[f("Financial")])),_:1,__:[28]})]),_:1},8,["modelValue"]),t(w,{modelValue:r.activeTab,"onUpdate:modelValue":e[24]||(e[24]=i=>r.activeTab=i)},{default:n(()=>[t(b,{value:"basic"},{default:n(()=>[l("div",j,[t(u,{modelValue:r.form.name,"onUpdate:modelValue":[e[1]||(e[1]=i=>r.form.name=i),e[2]||(e[2]=i=>s.clearFieldError("name"))],variant:"outlined",rules:[s.rules.required],required:"",hint:"Enter the customer's full name","error-messages":s.getFieldError("name"),"persistent-hint":"",onInput:s.handleNameInput,class:"mb-4"},{label:n(()=>e[29]||(e[29]=[f(" Name "),l("span",{class:"text-error"},"*",-1)])),_:1},8,["modelValue","rules","error-messages","onInput"]),t(u,{modelValue:r.form.code,"onUpdate:modelValue":[e[3]||(e[3]=i=>r.form.code=i),e[4]||(e[4]=i=>s.clearFieldError("code"))],label:"Code",variant:"outlined",rules:[s.rules.maxLength(255)],"error-messages":s.getFieldError("code"),hint:"Auto-generated from name, but can be edited. Unique identifier for the customer","persistent-hint":"",class:"mb-4"},{"append-inner":n(()=>[t(g,{icon:"mdi-refresh",size:"small",variant:"text",onClick:s.manualGenerateCode,title:"Generate code from name",disabled:!r.form.name||r.form.name.trim().length<=3},null,8,["onClick","disabled"])]),_:1},8,["modelValue","rules","error-messages"]),t(u,{modelValue:r.form.company_name,"onUpdate:modelValue":[e[5]||(e[5]=i=>r.form.company_name=i),e[6]||(e[6]=i=>s.clearFieldError("company_name"))],label:"Company Name",variant:"outlined",rules:[s.rules.maxLength(255)],"error-messages":s.getFieldError("company_name"),hint:"Optional: Enter the company or business name if applicable","persistent-hint":"",class:"mb-4"},null,8,["modelValue","rules","error-messages"]),t(u,{modelValue:r.form.tax_id,"onUpdate:modelValue":[e[7]||(e[7]=i=>r.form.tax_id=i),e[8]||(e[8]=i=>s.clearFieldError("tax_id"))],label:"Tax ID",variant:"outlined",rules:[s.rules.maxLength(255)],"error-messages":s.getFieldError("tax_id"),hint:"Optional: Enter the tax identification number (TIN/VAT ID)","persistent-hint":"",class:"mb-4"},null,8,["modelValue","rules","error-messages"]),t(x,{modelValue:r.form.is_active,"onUpdate:modelValue":e[9]||(e[9]=i=>r.form.is_active=i),label:"Active",color:"success",hint:"Enable to make this customer active. Inactive customers won't appear in some lists","persistent-hint":"",class:"mb-4"},null,8,["modelValue"])])]),_:1}),t(b,{value:"contact"},{default:n(()=>[l("div",X,[t(u,{modelValue:r.form.email,"onUpdate:modelValue":[e[10]||(e[10]=i=>r.form.email=i),e[11]||(e[11]=i=>s.clearFieldError("email"))],label:"Email",type:"email",variant:"outlined",rules:[s.rules.email,s.rules.maxLength(255)],"error-messages":s.getFieldError("email"),hint:"Optional: Enter the customer's email address for communication","persistent-hint":"",class:"mb-4"},null,8,["modelValue","rules","error-messages"]),t(u,{modelValue:r.form.phone,"onUpdate:modelValue":[e[12]||(e[12]=i=>r.form.phone=i),e[13]||(e[13]=i=>s.clearFieldError("phone"))],label:"Phone",variant:"outlined",rules:[s.rules.phone,s.rules.maxLength(255)],"error-messages":s.getFieldError("phone"),hint:"Optional: Enter the landline or office phone number (e.g., 02-1234567)","persistent-hint":"",class:"mb-4"},null,8,["modelValue","rules","error-messages"]),t(u,{modelValue:r.form.mobile,"onUpdate:modelValue":[e[14]||(e[14]=i=>r.form.mobile=i),e[15]||(e[15]=i=>s.clearFieldError("mobile"))],label:"Mobile",variant:"outlined",rules:[s.rules.mobile,s.rules.maxLength(255)],"error-messages":s.getFieldError("mobile"),hint:"Optional: Enter the mobile or cell phone number (e.g., 01712345678)","persistent-hint":"",class:"mb-4"},null,8,["modelValue","rules","error-messages"]),t(E,{modelValue:r.form.address,"onUpdate:modelValue":e[16]||(e[16]=i=>r.form.address=i),label:"Address",variant:"outlined",rows:"2",hint:"Optional: Enter the complete street address","persistent-hint":"",class:"mb-4"},null,8,["modelValue"]),t(k,null,{default:n(()=>[t(v,{cols:"12",md:"6"},{default:n(()=>[t(u,{modelValue:r.form.city,"onUpdate:modelValue":e[17]||(e[17]=i=>r.form.city=i),label:"City",variant:"outlined",rules:[s.rules.maxLength(255)],hint:"Optional: Enter the city name","persistent-hint":""},null,8,["modelValue","rules"])]),_:1}),t(v,{cols:"12",md:"6"},{default:n(()=>[t(u,{modelValue:r.form.state,"onUpdate:modelValue":e[18]||(e[18]=i=>r.form.state=i),label:"State",variant:"outlined",rules:[s.rules.maxLength(255)],hint:"Optional: Enter the state or province name","persistent-hint":""},null,8,["modelValue","rules"])]),_:1})]),_:1}),t(k,null,{default:n(()=>[t(v,{cols:"12",md:"6"},{default:n(()=>[t(u,{modelValue:r.form.country,"onUpdate:modelValue":e[19]||(e[19]=i=>r.form.country=i),label:"Country",variant:"outlined",rules:[s.rules.maxLength(255)],hint:"Optional: Enter the country name","persistent-hint":""},null,8,["modelValue","rules"])]),_:1}),t(v,{cols:"12",md:"6"},{default:n(()=>[t(u,{modelValue:r.form.postal_code,"onUpdate:modelValue":e[20]||(e[20]=i=>r.form.postal_code=i),label:"Postal Code",variant:"outlined",rules:[s.rules.maxLength(255)],hint:"Optional: Enter the postal code or zip code","persistent-hint":""},null,8,["modelValue","rules"])]),_:1})]),_:1})])]),_:1}),t(b,{value:"financial"},{default:n(()=>[l("div",q,[t(u,{modelValue:r.form.opening_balance,"onUpdate:modelValue":[e[21]||(e[21]=i=>r.form.opening_balance=i),e[22]||(e[22]=i=>s.clearFieldError("opening_balance"))],modelModifiers:{number:!0},label:"Opening Balance",type:"number",step:"0.01",prefix:"৳",variant:"outlined",rules:[s.rules.numeric,s.rules.minValue(0)],"error-messages":s.getFieldError("opening_balance"),hint:"Enter the initial balance when creating this customer. Must be 0 or greater","persistent-hint":"",class:"mb-4"},null,8,["modelValue","rules","error-messages"]),t(E,{modelValue:r.form.notes,"onUpdate:modelValue":e[23]||(e[23]=i=>r.form.notes=i),label:"Notes",variant:"outlined",rows:"4",hint:"Optional: Add any additional notes or comments about this customer","persistent-hint":"",class:"mb-4"},null,8,["modelValue"])])]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["onSubmit"])]),_:1}),t(d,null,{default:n(()=>[t(D),t(g,{onClick:s.onCancel,variant:"text"},{default:n(()=>e[30]||(e[30]=[f("Cancel")])),_:1,__:[30]},8,["onClick"]),t(g,{onClick:s.onSave,color:"primary",loading:r.saving},{default:n(()=>[f(c(s.editingCustomer?"Update":"Create"),1)]),_:1},8,["onClick","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}const R=A(L,[["render",G],["__scopeId","data-v-42b500ac"]]),H={name:"CustomerViewDialog",props:{modelValue:{type:Boolean,default:!1},customer:{type:Object,default:null}},emits:["update:modelValue"],data(){return{activeTab:"basic"}},computed:{dialogModel:{get(){return this.modelValue},set(o){this.$emit("update:modelValue",o)}}},watch:{modelValue(o){o&&(this.activeTab="basic")}},methods:{formatCurrency(o){return o==null?"৳0.00":"৳"+new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}).format(o)}}},Z={class:"pa-4"},J={class:"mb-4"},K={class:"mt-1"},Q={class:"mb-4"},W={class:"mt-1"},Y={class:"mb-4"},$={class:"mt-1"},ee={class:"mb-4"},te={class:"mt-1"},le={class:"mb-4"},oe={class:"mt-1"},ne={class:"pa-4"},se={class:"mb-4"},re={class:"mt-1"},ae={class:"mb-4"},ie={class:"mt-1"},de={class:"mb-4"},me={class:"mt-1"},ue={class:"mb-4"},ce={class:"mt-1"},fe={class:"mb-4"},_e={class:"mt-1"},ve={class:"mb-4"},ge={class:"mt-1"},pe={class:"mb-4"},he={class:"mt-1"},be={class:"mb-4"},ye={class:"mt-1"},Ve={class:"pa-4"},Ce={class:"mb-4"},xe={class:"mt-1"},ke={class:"mb-4"},Ee={class:"mt-1"},we={class:"mb-4"},Fe={class:"mt-1"};function Ue(o,e,m,C,r,s){const p=a("v-card-title"),_=a("v-tab"),V=a("v-tabs"),u=a("v-col"),g=a("v-row"),x=a("v-chip"),b=a("v-window-item"),E=a("v-window"),v=a("v-card-text"),k=a("v-spacer"),w=a("v-btn"),F=a("v-card-actions"),U=a("v-card"),D=a("v-dialog");return h(),N(D,{modelValue:s.dialogModel,"onUpdate:modelValue":e[3]||(e[3]=d=>s.dialogModel=d),"max-width":"800",scrollable:""},{default:n(()=>[m.customer?(h(),N(U,{key:0},{default:n(()=>[t(p,null,{default:n(()=>e[4]||(e[4]=[f(" Customer Details ")])),_:1,__:[4]}),t(v,null,{default:n(()=>[t(V,{modelValue:r.activeTab,"onUpdate:modelValue":e[0]||(e[0]=d=>r.activeTab=d),"bg-color":"grey-lighten-4"},{default:n(()=>[t(_,{value:"basic"},{default:n(()=>e[5]||(e[5]=[f("Basic Information")])),_:1,__:[5]}),t(_,{value:"contact"},{default:n(()=>e[6]||(e[6]=[f("Contact Details")])),_:1,__:[6]}),t(_,{value:"financial"},{default:n(()=>e[7]||(e[7]=[f("Financial")])),_:1,__:[7]})]),_:1},8,["modelValue"]),t(E,{modelValue:r.activeTab,"onUpdate:modelValue":e[1]||(e[1]=d=>r.activeTab=d)},{default:n(()=>[t(b,{value:"basic"},{default:n(()=>[l("div",Z,[t(g,null,{default:n(()=>[t(u,{cols:"12",md:"6"},{default:n(()=>[l("div",J,[e[8]||(e[8]=l("strong",{class:"text-grey-darken-1"},"Name:",-1)),l("div",K,c(m.customer.name||"-"),1)])]),_:1}),t(u,{cols:"12",md:"6"},{default:n(()=>[l("div",Q,[e[9]||(e[9]=l("strong",{class:"text-grey-darken-1"},"Code:",-1)),l("div",W,c(m.customer.code||"-"),1)])]),_:1})]),_:1}),t(g,null,{default:n(()=>[t(u,{cols:"12",md:"6"},{default:n(()=>[l("div",Y,[e[10]||(e[10]=l("strong",{class:"text-grey-darken-1"},"Company Name:",-1)),l("div",$,c(m.customer.company_name||"-"),1)])]),_:1}),t(u,{cols:"12",md:"6"},{default:n(()=>[l("div",ee,[e[11]||(e[11]=l("strong",{class:"text-grey-darken-1"},"Tax ID:",-1)),l("div",te,c(m.customer.tax_id||"-"),1)])]),_:1})]),_:1}),l("div",le,[e[12]||(e[12]=l("strong",{class:"text-grey-darken-1"},"Status:",-1)),l("div",oe,[t(x,{color:m.customer.is_active?"success":"error",size:"small"},{default:n(()=>[f(c(m.customer.is_active?"Active":"Inactive"),1)]),_:1},8,["color"])])])])]),_:1}),t(b,{value:"contact"},{default:n(()=>[l("div",ne,[t(g,null,{default:n(()=>[t(u,{cols:"12",md:"6"},{default:n(()=>[l("div",se,[e[13]||(e[13]=l("strong",{class:"text-grey-darken-1"},"Email:",-1)),l("div",re,c(m.customer.email||"-"),1)])]),_:1}),t(u,{cols:"12",md:"6"},{default:n(()=>[l("div",ae,[e[14]||(e[14]=l("strong",{class:"text-grey-darken-1"},"Phone:",-1)),l("div",ie,c(m.customer.phone||"-"),1)])]),_:1})]),_:1}),t(g,null,{default:n(()=>[t(u,{cols:"12",md:"6"},{default:n(()=>[l("div",de,[e[15]||(e[15]=l("strong",{class:"text-grey-darken-1"},"Mobile:",-1)),l("div",me,c(m.customer.mobile||"-"),1)])]),_:1})]),_:1}),l("div",ue,[e[16]||(e[16]=l("strong",{class:"text-grey-darken-1"},"Address:",-1)),l("div",ce,c(m.customer.address||"-"),1)]),t(g,null,{default:n(()=>[t(u,{cols:"12",md:"6"},{default:n(()=>[l("div",fe,[e[17]||(e[17]=l("strong",{class:"text-grey-darken-1"},"City:",-1)),l("div",_e,c(m.customer.city||"-"),1)])]),_:1}),t(u,{cols:"12",md:"6"},{default:n(()=>[l("div",ve,[e[18]||(e[18]=l("strong",{class:"text-grey-darken-1"},"State:",-1)),l("div",ge,c(m.customer.state||"-"),1)])]),_:1})]),_:1}),t(g,null,{default:n(()=>[t(u,{cols:"12",md:"6"},{default:n(()=>[l("div",pe,[e[19]||(e[19]=l("strong",{class:"text-grey-darken-1"},"Country:",-1)),l("div",he,c(m.customer.country||"-"),1)])]),_:1}),t(u,{cols:"12",md:"6"},{default:n(()=>[l("div",be,[e[20]||(e[20]=l("strong",{class:"text-grey-darken-1"},"Postal Code:",-1)),l("div",ye,c(m.customer.postal_code||"-"),1)])]),_:1})]),_:1})])]),_:1}),t(b,{value:"financial"},{default:n(()=>[l("div",Ve,[t(g,null,{default:n(()=>[t(u,{cols:"12",md:"6"},{default:n(()=>[l("div",Ce,[e[21]||(e[21]=l("strong",{class:"text-grey-darken-1"},"Opening Balance:",-1)),l("div",xe,c(s.formatCurrency(m.customer.opening_balance)),1)])]),_:1}),t(u,{cols:"12",md:"6"},{default:n(()=>[l("div",ke,[e[22]||(e[22]=l("strong",{class:"text-grey-darken-1"},"Current Balance:",-1)),l("div",Ee,[t(x,{color:m.customer.current_balance>=0?"success":"error",size:"small"},{default:n(()=>[f(c(s.formatCurrency(m.customer.current_balance)),1)]),_:1},8,["color"])])])]),_:1})]),_:1}),l("div",we,[e[23]||(e[23]=l("strong",{class:"text-grey-darken-1"},"Notes:",-1)),l("div",Fe,c(m.customer.notes||"-"),1)])])]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(F,null,{default:n(()=>[t(k),t(w,{onClick:e[2]||(e[2]=d=>s.dialogModel=!1),variant:"text"},{default:n(()=>e[24]||(e[24]=[f("Close")])),_:1,__:[24]})]),_:1})]),_:1})):T("",!0)]),_:1},8,["modelValue"])}const De=A(H,[["render",Ue],["__scopeId","data-v-8afe660f"]]),Se={components:{CustomerDialog:R,CustomerViewDialog:De},mixins:[M],data(){return{customers:[],activeFilter:null,activeOptions:[{title:"Active",value:!0},{title:"Inactive",value:!1}],dialog:!1,viewDialog:!1,selectedCustomer:null,editingCustomer:null}},async mounted(){await this.loadCustomers()},methods:{async loadCustomers(){try{this.loading=!0;const o=this.buildPaginationParams();this.search&&(o.search=this.search),this.activeFilter!==null&&(o.is_active=this.activeFilter);const e=await this.$axios.get("/api/v1/customers",{params:o,headers:this.getAuthHeaders()});this.customers=e.data.data||[],this.updatePagination(e.data)}catch(o){this.handleApiError(o,"Failed to load customers")}finally{this.loading=!1}},openDialog(o){this.editingCustomer=o,this.dialog=!0},closeDialog(){this.dialog=!1,this.editingCustomer=null},handleSaveSuccess({data:o,isEditing:e}){this.showSuccess(e?"Customer updated successfully":"Customer created successfully"),this.closeDialog(),this.loadCustomers()},handleSaveError(o){this.handleApiError(o,"Error saving customer")},async deleteCustomer(o){if(confirm(`Delete customer "${o.name}"?`))try{const e=localStorage.getItem("admin_token");await this.$axios.delete(`/api/v1/customers/${o.id}`,{headers:{Authorization:`Bearer ${e}`}}),this.showSuccess("Customer deleted successfully"),await this.loadCustomers()}catch(e){this.handleApiError(e,"Error deleting customer")}},viewCustomer(o){this.selectedCustomer=o,this.viewDialog=!0},formatCurrency(o){return o==null?"৳0.00":"৳"+new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}).format(o)},onPerPageChange(){this.resetPagination(),this.loadCustomers()}}},Ie={class:"page-header"},Ne={class:"text-caption text-grey"},Te={key:0},Ae={class:"d-flex flex-column flex-md-row justify-space-between align-center align-md-start gap-3 mt-4"},Pe={class:"text-caption text-grey"},Oe={key:0},Me={key:1},Be={key:0,class:"d-flex align-center gap-2"};function ze(o,e,m,C,r,s){const p=a("v-btn"),_=a("v-select"),V=a("v-col"),u=a("v-text-field"),g=a("v-row"),x=a("v-card-text"),b=a("v-card"),E=a("v-card-title"),v=a("v-skeleton-loader"),k=a("v-chip"),w=a("v-table"),F=a("v-pagination"),U=a("CustomerViewDialog"),D=a("CustomerDialog");return h(),y("div",null,[l("div",Ie,[e[8]||(e[8]=l("h1",{class:"text-h4 page-title"},"Customer Management",-1)),t(p,{color:"primary","prepend-icon":"mdi-plus",onClick:e[0]||(e[0]=d=>s.openDialog(null)),class:"add-button"},{default:n(()=>e[7]||(e[7]=[f(" Add New Customer ")])),_:1,__:[7]})]),t(b,{class:"mb-4"},{default:n(()=>[t(x,null,{default:n(()=>[t(g,null,{default:n(()=>[t(V,{cols:"12",md:"3"},{default:n(()=>[t(_,{modelValue:o.perPage,"onUpdate:modelValue":[e[1]||(e[1]=d=>o.perPage=d),s.onPerPageChange],items:o.perPageOptions,label:"Items per page","prepend-inner-icon":"mdi-format-list-numbered",variant:"outlined",density:"compact"},null,8,["modelValue","items","onUpdate:modelValue"])]),_:1}),t(V,{cols:"12",md:"3"},{default:n(()=>[t(_,{modelValue:r.activeFilter,"onUpdate:modelValue":[e[2]||(e[2]=d=>r.activeFilter=d),s.loadCustomers],items:r.activeOptions,label:"Filter by Status",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","items","onUpdate:modelValue"])]),_:1}),t(V,{cols:"12",md:"6"},{default:n(()=>[t(u,{modelValue:o.search,"onUpdate:modelValue":e[3]||(e[3]=d=>o.search=d),label:"Search by name, code, company, email, phone","prepend-inner-icon":"mdi-magnify",variant:"outlined",density:"compact",clearable:"",onInput:s.loadCustomers},null,8,["modelValue","onInput"])]),_:1})]),_:1})]),_:1})]),_:1}),t(b,null,{default:n(()=>[t(E,{class:"d-flex justify-space-between align-center"},{default:n(()=>[e[10]||(e[10]=l("span",null,"Customers",-1)),l("span",Ne,[e[9]||(e[9]=f(" Total Records: ")),l("strong",null,c(o.pagination.total||0),1)])]),_:1,__:[10]}),t(x,null,{default:n(()=>[t(w,null,{default:n(()=>[e[12]||(e[12]=l("thead",null,[l("tr",null,[l("th",null,"Code"),l("th",null,"Name"),l("th",null,"Company"),l("th",null,"Email"),l("th",null,"Phone"),l("th",null,"City"),l("th",null,"Balance"),l("th",null,"Status"),l("th",null,"Actions")])],-1)),l("tbody",null,[o.loading?(h(),y(I,{key:0},P(5,d=>l("tr",{key:`skeleton-${d}`},[l("td",null,[t(v,{type:"text",width:"100"})]),l("td",null,[t(v,{type:"text",width:"150"})]),l("td",null,[t(v,{type:"text",width:"150"})]),l("td",null,[t(v,{type:"text",width:"150"})]),l("td",null,[t(v,{type:"text",width:"120"})]),l("td",null,[t(v,{type:"text",width:"100"})]),l("td",null,[t(v,{type:"text",width:"100"})]),l("td",null,[t(v,{type:"chip",width:"80",height:"24"})]),l("td",null,[t(v,{type:"button",width:"32",height:"32"})])])),64)):(h(),y(I,{key:1},[(h(!0),y(I,null,P(r.customers,d=>(h(),y("tr",{key:d.id},[l("td",null,c(d.code||"-"),1),l("td",null,c(d.name),1),l("td",null,c(d.company_name||"-"),1),l("td",null,c(d.email||"-"),1),l("td",null,c(d.phone||d.mobile||"-"),1),l("td",null,c(d.city||"-"),1),l("td",null,[t(k,{color:d.current_balance>=0?"success":"error",size:"small"},{default:n(()=>[f(c(s.formatCurrency(d.current_balance)),1)]),_:2},1032,["color"])]),l("td",null,[t(k,{color:d.is_active?"success":"error",size:"small"},{default:n(()=>[f(c(d.is_active?"Active":"Inactive"),1)]),_:2},1032,["color"])]),l("td",null,[t(p,{size:"small",icon:"mdi-eye",onClick:S=>s.viewCustomer(d),variant:"text",title:"View"},null,8,["onClick"]),t(p,{size:"small",icon:"mdi-pencil",onClick:S=>s.openDialog(d),variant:"text",title:"Edit"},null,8,["onClick"]),t(p,{size:"small",icon:"mdi-delete",onClick:S=>s.deleteCustomer(d),variant:"text",color:"error",title:"Delete"},null,8,["onClick"])])]))),128)),r.customers.length===0?(h(),y("tr",Te,e[11]||(e[11]=[l("td",{colspan:"9",class:"text-center py-4"},"No customers found",-1)]))):T("",!0)],64))])]),_:1,__:[12]}),l("div",Ae,[l("div",Pe,[r.customers.length>0&&o.pagination.total>0?(h(),y("span",Oe,[e[13]||(e[13]=f(" Showing ")),l("strong",null,c((o.currentPage-1)*o.perPage+1),1),e[14]||(e[14]=f(" to ")),l("strong",null,c(Math.min(o.currentPage*o.perPage,o.pagination.total)),1),e[15]||(e[15]=f(" of ")),l("strong",null,c(o.pagination.total.toLocaleString()),1),e[16]||(e[16]=f(" records "))])):(h(),y("span",Me,"No records found"))]),o.pagination.last_page>1?(h(),y("div",Be,[t(F,{modelValue:o.currentPage,"onUpdate:modelValue":[e[4]||(e[4]=d=>o.currentPage=d),s.loadCustomers],length:o.pagination.last_page,"total-visible":7,density:"comfortable"},null,8,["modelValue","length","onUpdate:modelValue"])])):T("",!0)])]),_:1})]),_:1}),t(U,{modelValue:r.viewDialog,"onUpdate:modelValue":e[5]||(e[5]=d=>r.viewDialog=d),customer:r.selectedCustomer},null,8,["modelValue","customer"]),t(D,{modelValue:r.dialog,"onUpdate:modelValue":e[6]||(e[6]=d=>r.dialog=d),customer:r.editingCustomer,onSave:s.handleSaveSuccess,onError:s.handleSaveError,onCancel:s.closeDialog},null,8,["modelValue","customer","onSave","onError","onCancel"])])}const qe=A(Se,[["render",ze],["__scopeId","data-v-24ef63da"]]);export{qe as default};
