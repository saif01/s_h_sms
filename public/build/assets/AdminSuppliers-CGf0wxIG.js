import{a as M}from"./adminPaginationMixin-DN7Wb3ng.js";import{c as B}from"./validationRules-D8HGgtlI.js";import{_ as T,d as P,w as o,a as t,r as a,f as p,t as c,g as z,b as l,o as h,e as N,c as y,F as I,h as A}from"./app-CHlE1Mvy.js";const L={name:"SupplierDialog",props:{modelValue:{type:Boolean,default:!1},supplier:{type:Object,default:null}},emits:["update:modelValue","save","cancel"],data(){return{activeTab:"basic",saving:!1,backendErrors:{},form:{name:"",code:"",company_name:"",email:"",phone:"",mobile:"",address:"",city:"",state:"",country:"",postal_code:"",tax_id:"",opening_balance:0,notes:"",is_active:!0}}},computed:{rules(){return B(this,"name")},dialogModel:{get(){return this.modelValue},set(n){this.$emit("update:modelValue",n)}},editingSupplier(){return this.supplier!==null}},watch:{supplier:{handler(n){this.activeTab="basic",n?this.form={name:n.name||"",code:n.code||"",company_name:n.company_name||"",email:n.email||"",phone:n.phone||"",mobile:n.mobile||"",address:n.address||"",city:n.city||"",state:n.state||"",country:n.country||"",postal_code:n.postal_code||"",tax_id:n.tax_id||"",opening_balance:n.opening_balance||0,notes:n.notes||"",is_active:n.is_active!==void 0?n.is_active:!0}:this.resetForm()},immediate:!0},dialogModel(n){n&&!this.editingSupplier&&this.$nextTick(()=>{!this.form.code&&this.form.name&&this.generateCodeFromName()})},"form.name"(n,e){n&&n.trim().length>3&&(!this.form.code||!this.form.code.trim())&&this.$nextTick(()=>{this.generateCodeFromName()})},"form.code"(n){!n&&this.form.name&&this.form.name.trim().length>3&&this.$nextTick(()=>{this.generateCodeFromName()})}},methods:{handleNameInput(){this.form.name&&this.form.name.trim().length>3&&(!this.form.code||!this.form.code.trim())&&this.$nextTick(()=>{this.generateCodeFromName()})},generateCodeFromName(n=!1){if(!this.form.name||!this.form.name.trim()||!n&&this.form.code&&this.form.code.trim())return;const e=this.form.name.replace(/[^A-Za-z]/g,"");if(!e||e.length===0){this.form.code="SUP-XXX";return}let m="";if(e.length>=3)m=e.substring(0,3).toUpperCase();else{m=e.toUpperCase();const x=m[0]||"X";for(;m.length<3;)m+=x}this.form.code=`SUP-${m}`},async generateCode(){this.generateCodeFromName()},manualGenerateCode(){this.form.name&&this.form.name.trim().length>3&&this.generateCodeFromName(!0)},resetForm(){this.form={name:"",code:"",company_name:"",email:"",phone:"",mobile:"",address:"",city:"",state:"",country:"",postal_code:"",tax_id:"",opening_balance:0,notes:"",is_active:!0},this.backendErrors={},this.$refs.form&&this.$refs.form.resetValidation()},async onSave(){var n,e,m,x;if(this.$refs.form.validate()){this.backendErrors={},this.saving=!0;try{const r=localStorage.getItem("admin_token"),s=(n=this.supplier)==null?void 0:n.id;if(this.editingSupplier&&!s)throw new Error("Supplier ID is missing. Cannot update supplier.");const g=s?`/api/v1/suppliers/${s}`:"/api/v1/suppliers",f=s?"put":"post";await this.$axios[f](g,this.form,{headers:{Authorization:`Bearer ${r}`}}),this.$emit("save",{data:this.form,isEditing:!!s})}catch(r){if(((e=r.response)==null?void 0:e.status)===422&&((x=(m=r.response)==null?void 0:m.data)!=null&&x.errors)){this.backendErrors=r.response.data.errors;const s=[];Object.keys(this.backendErrors).forEach(f=>{(Array.isArray(this.backendErrors[f])?this.backendErrors[f]:[this.backendErrors[f]]).forEach(u=>{s.push(`${this.formatFieldName(f)}: ${u}`)})});const g=s.length>0?s.join("<br>"):"Please fix the validation errors in the form";this.showError(g),this.$nextTick(()=>{this.$refs.form&&this.$refs.form.validate()})}else this.$emit("error",r)}finally{this.saving=!1}}},formatFieldName(n){return n.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")},showError(n){window.Toast?window.Toast.fire({icon:"error",title:"Validation Error",html:n}):window.Swal?window.Swal.fire({icon:"error",title:"Validation Error",html:n}):alert(n)},getFieldError(n){return this.backendErrors[n]?Array.isArray(this.backendErrors[n])?this.backendErrors[n][0]:this.backendErrors[n]:null},clearFieldError(n){this.backendErrors[n]&&(delete this.backendErrors[n],this.$forceUpdate())},onCancel(){this.resetForm(),this.$emit("cancel")}}},j={class:"pa-4"},X={class:"pa-4"},q={class:"pa-4"};function G(n,e,m,x,r,s){const g=a("v-card-title"),f=a("v-tab"),V=a("v-tabs"),u=a("v-text-field"),v=a("v-btn"),k=a("v-switch"),b=a("v-window-item"),w=a("v-textarea"),_=a("v-col"),E=a("v-row"),C=a("v-window"),S=a("v-form"),F=a("v-card-text"),U=a("v-spacer"),d=a("v-card-actions"),D=a("v-card"),O=a("v-dialog");return h(),P(O,{modelValue:s.dialogModel,"onUpdate:modelValue":e[25]||(e[25]=i=>s.dialogModel=i),"max-width":"800",scrollable:"",persistent:""},{default:o(()=>[t(D,null,{default:o(()=>[t(g,null,{default:o(()=>[p(c(s.editingSupplier?"Edit Supplier":"New Supplier"),1)]),_:1}),t(F,null,{default:o(()=>[t(S,{ref:"form",onSubmit:z(s.onSave,["prevent"])},{default:o(()=>[t(V,{modelValue:r.activeTab,"onUpdate:modelValue":e[0]||(e[0]=i=>r.activeTab=i),"bg-color":"grey-lighten-4"},{default:o(()=>[t(f,{value:"basic"},{default:o(()=>e[26]||(e[26]=[p("Basic Information")])),_:1,__:[26]}),t(f,{value:"contact"},{default:o(()=>e[27]||(e[27]=[p("Contact Details")])),_:1,__:[27]}),t(f,{value:"financial"},{default:o(()=>e[28]||(e[28]=[p("Financial")])),_:1,__:[28]})]),_:1},8,["modelValue"]),t(C,{modelValue:r.activeTab,"onUpdate:modelValue":e[24]||(e[24]=i=>r.activeTab=i)},{default:o(()=>[t(b,{value:"basic"},{default:o(()=>[l("div",j,[t(u,{modelValue:r.form.name,"onUpdate:modelValue":[e[1]||(e[1]=i=>r.form.name=i),e[2]||(e[2]=i=>s.clearFieldError("name"))],variant:"outlined",rules:[s.rules.required],required:"",hint:"Enter the supplier's full name","error-messages":s.getFieldError("name"),"persistent-hint":"",onInput:s.handleNameInput,class:"mb-4"},{label:o(()=>e[29]||(e[29]=[p(" Name "),l("span",{class:"text-error"},"*",-1)])),_:1},8,["modelValue","rules","error-messages","onInput"]),t(u,{modelValue:r.form.code,"onUpdate:modelValue":[e[3]||(e[3]=i=>r.form.code=i),e[4]||(e[4]=i=>s.clearFieldError("code"))],label:"Code",variant:"outlined",rules:[s.rules.maxLength(255)],"error-messages":s.getFieldError("code"),hint:"Auto-generated from name, but can be edited. Unique identifier for the supplier","persistent-hint":"",class:"mb-4"},{"append-inner":o(()=>[t(v,{icon:"mdi-refresh",size:"small",variant:"text",onClick:s.manualGenerateCode,title:"Generate code from name",disabled:!r.form.name||r.form.name.trim().length<=3},null,8,["onClick","disabled"])]),_:1},8,["modelValue","rules","error-messages"]),t(u,{modelValue:r.form.company_name,"onUpdate:modelValue":[e[5]||(e[5]=i=>r.form.company_name=i),e[6]||(e[6]=i=>s.clearFieldError("company_name"))],label:"Company Name",variant:"outlined",rules:[s.rules.maxLength(255)],"error-messages":s.getFieldError("company_name"),hint:"Optional: Enter the company or business name if applicable","persistent-hint":"",class:"mb-4"},null,8,["modelValue","rules","error-messages"]),t(u,{modelValue:r.form.tax_id,"onUpdate:modelValue":[e[7]||(e[7]=i=>r.form.tax_id=i),e[8]||(e[8]=i=>s.clearFieldError("tax_id"))],label:"Tax ID",variant:"outlined",rules:[s.rules.maxLength(255)],"error-messages":s.getFieldError("tax_id"),hint:"Optional: Enter the tax identification number (TIN/VAT ID)","persistent-hint":"",class:"mb-4"},null,8,["modelValue","rules","error-messages"]),t(k,{modelValue:r.form.is_active,"onUpdate:modelValue":e[9]||(e[9]=i=>r.form.is_active=i),label:"Active",color:"success",hint:"Enable to make this supplier active. Inactive suppliers won't appear in some lists","persistent-hint":"",class:"mb-4"},null,8,["modelValue"])])]),_:1}),t(b,{value:"contact"},{default:o(()=>[l("div",X,[t(u,{modelValue:r.form.email,"onUpdate:modelValue":[e[10]||(e[10]=i=>r.form.email=i),e[11]||(e[11]=i=>s.clearFieldError("email"))],label:"Email",type:"email",variant:"outlined",rules:[s.rules.email,s.rules.maxLength(255)],"error-messages":s.getFieldError("email"),hint:"Optional: Enter the supplier's email address for communication","persistent-hint":"",class:"mb-4"},null,8,["modelValue","rules","error-messages"]),t(u,{modelValue:r.form.phone,"onUpdate:modelValue":[e[12]||(e[12]=i=>r.form.phone=i),e[13]||(e[13]=i=>s.clearFieldError("phone"))],label:"Phone",variant:"outlined",rules:[s.rules.phone,s.rules.maxLength(255)],"error-messages":s.getFieldError("phone"),hint:"Optional: Enter the landline or office phone number (e.g., 02-1234567)","persistent-hint":"",class:"mb-4"},null,8,["modelValue","rules","error-messages"]),t(u,{modelValue:r.form.mobile,"onUpdate:modelValue":[e[14]||(e[14]=i=>r.form.mobile=i),e[15]||(e[15]=i=>s.clearFieldError("mobile"))],label:"Mobile",variant:"outlined",rules:[s.rules.mobile,s.rules.maxLength(255)],"error-messages":s.getFieldError("mobile"),hint:"Optional: Enter the mobile or cell phone number (e.g., 01712345678)","persistent-hint":"",class:"mb-4"},null,8,["modelValue","rules","error-messages"]),t(w,{modelValue:r.form.address,"onUpdate:modelValue":e[16]||(e[16]=i=>r.form.address=i),label:"Address",variant:"outlined",rows:"2",hint:"Optional: Enter the complete street address","persistent-hint":"",class:"mb-4"},null,8,["modelValue"]),t(E,null,{default:o(()=>[t(_,{cols:"12",md:"6"},{default:o(()=>[t(u,{modelValue:r.form.city,"onUpdate:modelValue":e[17]||(e[17]=i=>r.form.city=i),label:"City",variant:"outlined",rules:[s.rules.maxLength(255)],hint:"Optional: Enter the city name","persistent-hint":""},null,8,["modelValue","rules"])]),_:1}),t(_,{cols:"12",md:"6"},{default:o(()=>[t(u,{modelValue:r.form.state,"onUpdate:modelValue":e[18]||(e[18]=i=>r.form.state=i),label:"State",variant:"outlined",rules:[s.rules.maxLength(255)],hint:"Optional: Enter the state or province name","persistent-hint":""},null,8,["modelValue","rules"])]),_:1})]),_:1}),t(E,null,{default:o(()=>[t(_,{cols:"12",md:"6"},{default:o(()=>[t(u,{modelValue:r.form.country,"onUpdate:modelValue":e[19]||(e[19]=i=>r.form.country=i),label:"Country",variant:"outlined",rules:[s.rules.maxLength(255)],hint:"Optional: Enter the country name","persistent-hint":""},null,8,["modelValue","rules"])]),_:1}),t(_,{cols:"12",md:"6"},{default:o(()=>[t(u,{modelValue:r.form.postal_code,"onUpdate:modelValue":e[20]||(e[20]=i=>r.form.postal_code=i),label:"Postal Code",variant:"outlined",rules:[s.rules.maxLength(255)],hint:"Optional: Enter the postal code or zip code","persistent-hint":""},null,8,["modelValue","rules"])]),_:1})]),_:1})])]),_:1}),t(b,{value:"financial"},{default:o(()=>[l("div",q,[t(u,{modelValue:r.form.opening_balance,"onUpdate:modelValue":[e[21]||(e[21]=i=>r.form.opening_balance=i),e[22]||(e[22]=i=>s.clearFieldError("opening_balance"))],modelModifiers:{number:!0},label:"Opening Balance",type:"number",step:"0.01",prefix:"৳",variant:"outlined",rules:[s.rules.numeric,s.rules.minValue(0)],"error-messages":s.getFieldError("opening_balance"),hint:"Enter the initial balance when creating this supplier. Must be 0 or greater","persistent-hint":"",class:"mb-4"},null,8,["modelValue","rules","error-messages"]),t(w,{modelValue:r.form.notes,"onUpdate:modelValue":e[23]||(e[23]=i=>r.form.notes=i),label:"Notes",variant:"outlined",rows:"4",hint:"Optional: Add any additional notes or comments about this supplier","persistent-hint":"",class:"mb-4"},null,8,["modelValue"])])]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["onSubmit"])]),_:1}),t(d,null,{default:o(()=>[t(U),t(v,{onClick:s.onCancel,variant:"text"},{default:o(()=>e[30]||(e[30]=[p("Cancel")])),_:1,__:[30]},8,["onClick"]),t(v,{onClick:s.onSave,color:"primary",loading:r.saving},{default:o(()=>[p(c(s.editingSupplier?"Update":"Create"),1)]),_:1},8,["onClick","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}const R=T(L,[["render",G],["__scopeId","data-v-bee783a7"]]),H={name:"SupplierViewDialog",props:{modelValue:{type:Boolean,default:!1},supplier:{type:Object,default:null}},emits:["update:modelValue"],data(){return{activeTab:"basic"}},computed:{dialogModel:{get(){return this.modelValue},set(n){this.$emit("update:modelValue",n)}}},watch:{modelValue(n){n&&(this.activeTab="basic")}},methods:{formatCurrency(n){return n==null?"৳0.00":"৳"+new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}).format(n)}}},Z={class:"pa-4"},J={class:"mb-4"},K={class:"mt-1"},Q={class:"mb-4"},W={class:"mt-1"},Y={class:"mb-4"},$={class:"mt-1"},ee={class:"mb-4"},te={class:"mt-1"},le={class:"mb-4"},ne={class:"mt-1"},oe={class:"pa-4"},se={class:"mb-4"},re={class:"mt-1"},ae={class:"mb-4"},ie={class:"mt-1"},de={class:"mb-4"},me={class:"mt-1"},ue={class:"mb-4"},ce={class:"mt-1"},pe={class:"mb-4"},fe={class:"mt-1"},_e={class:"mb-4"},ve={class:"mt-1"},ge={class:"mb-4"},he={class:"mt-1"},be={class:"mb-4"},ye={class:"mt-1"},Ve={class:"pa-4"},xe={class:"mb-4"},ke={class:"mt-1"},Ee={class:"mb-4"},we={class:"mt-1"},Ce={class:"mb-4"},Se={class:"mt-1"};function Fe(n,e,m,x,r,s){const g=a("v-card-title"),f=a("v-tab"),V=a("v-tabs"),u=a("v-col"),v=a("v-row"),k=a("v-chip"),b=a("v-window-item"),w=a("v-window"),_=a("v-card-text"),E=a("v-spacer"),C=a("v-btn"),S=a("v-card-actions"),F=a("v-card"),U=a("v-dialog");return h(),P(U,{modelValue:s.dialogModel,"onUpdate:modelValue":e[3]||(e[3]=d=>s.dialogModel=d),"max-width":"800",scrollable:""},{default:o(()=>[m.supplier?(h(),P(F,{key:0},{default:o(()=>[t(g,null,{default:o(()=>e[4]||(e[4]=[p(" Supplier Details ")])),_:1,__:[4]}),t(_,null,{default:o(()=>[t(V,{modelValue:r.activeTab,"onUpdate:modelValue":e[0]||(e[0]=d=>r.activeTab=d),"bg-color":"grey-lighten-4"},{default:o(()=>[t(f,{value:"basic"},{default:o(()=>e[5]||(e[5]=[p("Basic Information")])),_:1,__:[5]}),t(f,{value:"contact"},{default:o(()=>e[6]||(e[6]=[p("Contact Details")])),_:1,__:[6]}),t(f,{value:"financial"},{default:o(()=>e[7]||(e[7]=[p("Financial")])),_:1,__:[7]})]),_:1},8,["modelValue"]),t(w,{modelValue:r.activeTab,"onUpdate:modelValue":e[1]||(e[1]=d=>r.activeTab=d)},{default:o(()=>[t(b,{value:"basic"},{default:o(()=>[l("div",Z,[t(v,null,{default:o(()=>[t(u,{cols:"12",md:"6"},{default:o(()=>[l("div",J,[e[8]||(e[8]=l("strong",{class:"text-grey-darken-1"},"Name:",-1)),l("div",K,c(m.supplier.name||"-"),1)])]),_:1}),t(u,{cols:"12",md:"6"},{default:o(()=>[l("div",Q,[e[9]||(e[9]=l("strong",{class:"text-grey-darken-1"},"Code:",-1)),l("div",W,c(m.supplier.code||"-"),1)])]),_:1})]),_:1}),t(v,null,{default:o(()=>[t(u,{cols:"12",md:"6"},{default:o(()=>[l("div",Y,[e[10]||(e[10]=l("strong",{class:"text-grey-darken-1"},"Company Name:",-1)),l("div",$,c(m.supplier.company_name||"-"),1)])]),_:1}),t(u,{cols:"12",md:"6"},{default:o(()=>[l("div",ee,[e[11]||(e[11]=l("strong",{class:"text-grey-darken-1"},"Tax ID:",-1)),l("div",te,c(m.supplier.tax_id||"-"),1)])]),_:1})]),_:1}),l("div",le,[e[12]||(e[12]=l("strong",{class:"text-grey-darken-1"},"Status:",-1)),l("div",ne,[t(k,{color:m.supplier.is_active?"success":"error",size:"small"},{default:o(()=>[p(c(m.supplier.is_active?"Active":"Inactive"),1)]),_:1},8,["color"])])])])]),_:1}),t(b,{value:"contact"},{default:o(()=>[l("div",oe,[t(v,null,{default:o(()=>[t(u,{cols:"12",md:"6"},{default:o(()=>[l("div",se,[e[13]||(e[13]=l("strong",{class:"text-grey-darken-1"},"Email:",-1)),l("div",re,c(m.supplier.email||"-"),1)])]),_:1}),t(u,{cols:"12",md:"6"},{default:o(()=>[l("div",ae,[e[14]||(e[14]=l("strong",{class:"text-grey-darken-1"},"Phone:",-1)),l("div",ie,c(m.supplier.phone||"-"),1)])]),_:1})]),_:1}),t(v,null,{default:o(()=>[t(u,{cols:"12",md:"6"},{default:o(()=>[l("div",de,[e[15]||(e[15]=l("strong",{class:"text-grey-darken-1"},"Mobile:",-1)),l("div",me,c(m.supplier.mobile||"-"),1)])]),_:1})]),_:1}),l("div",ue,[e[16]||(e[16]=l("strong",{class:"text-grey-darken-1"},"Address:",-1)),l("div",ce,c(m.supplier.address||"-"),1)]),t(v,null,{default:o(()=>[t(u,{cols:"12",md:"6"},{default:o(()=>[l("div",pe,[e[17]||(e[17]=l("strong",{class:"text-grey-darken-1"},"City:",-1)),l("div",fe,c(m.supplier.city||"-"),1)])]),_:1}),t(u,{cols:"12",md:"6"},{default:o(()=>[l("div",_e,[e[18]||(e[18]=l("strong",{class:"text-grey-darken-1"},"State:",-1)),l("div",ve,c(m.supplier.state||"-"),1)])]),_:1})]),_:1}),t(v,null,{default:o(()=>[t(u,{cols:"12",md:"6"},{default:o(()=>[l("div",ge,[e[19]||(e[19]=l("strong",{class:"text-grey-darken-1"},"Country:",-1)),l("div",he,c(m.supplier.country||"-"),1)])]),_:1}),t(u,{cols:"12",md:"6"},{default:o(()=>[l("div",be,[e[20]||(e[20]=l("strong",{class:"text-grey-darken-1"},"Postal Code:",-1)),l("div",ye,c(m.supplier.postal_code||"-"),1)])]),_:1})]),_:1})])]),_:1}),t(b,{value:"financial"},{default:o(()=>[l("div",Ve,[t(v,null,{default:o(()=>[t(u,{cols:"12",md:"6"},{default:o(()=>[l("div",xe,[e[21]||(e[21]=l("strong",{class:"text-grey-darken-1"},"Opening Balance:",-1)),l("div",ke,c(s.formatCurrency(m.supplier.opening_balance)),1)])]),_:1}),t(u,{cols:"12",md:"6"},{default:o(()=>[l("div",Ee,[e[22]||(e[22]=l("strong",{class:"text-grey-darken-1"},"Current Balance:",-1)),l("div",we,[t(k,{color:m.supplier.current_balance>=0?"success":"error",size:"small"},{default:o(()=>[p(c(s.formatCurrency(m.supplier.current_balance)),1)]),_:1},8,["color"])])])]),_:1})]),_:1}),l("div",Ce,[e[23]||(e[23]=l("strong",{class:"text-grey-darken-1"},"Notes:",-1)),l("div",Se,c(m.supplier.notes||"-"),1)])])]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(S,null,{default:o(()=>[t(E),t(C,{onClick:e[2]||(e[2]=d=>s.dialogModel=!1),variant:"text"},{default:o(()=>e[24]||(e[24]=[p("Close")])),_:1,__:[24]})]),_:1})]),_:1})):N("",!0)]),_:1},8,["modelValue"])}const Ue=T(H,[["render",Fe],["__scopeId","data-v-f6e463e3"]]),De={components:{SupplierDialog:R,SupplierViewDialog:Ue},mixins:[M],data(){return{suppliers:[],activeFilter:null,activeOptions:[{title:"Active",value:!0},{title:"Inactive",value:!1}],dialog:!1,viewDialog:!1,selectedSupplier:null,editingSupplier:null}},async mounted(){await this.loadSuppliers()},methods:{async loadSuppliers(){try{this.loading=!0;const n=this.buildPaginationParams();this.search&&(n.search=this.search),this.activeFilter!==null&&(n.is_active=this.activeFilter);const e=await this.$axios.get("/api/v1/suppliers",{params:n,headers:this.getAuthHeaders()});this.suppliers=e.data.data||[],this.updatePagination(e.data)}catch(n){this.handleApiError(n,"Failed to load suppliers")}finally{this.loading=!1}},openDialog(n){this.editingSupplier=n,this.dialog=!0},closeDialog(){this.dialog=!1,this.editingSupplier=null},handleSaveSuccess({data:n,isEditing:e}){this.showSuccess(e?"Supplier updated successfully":"Supplier created successfully"),this.closeDialog(),this.loadSuppliers()},handleSaveError(n){this.handleApiError(n,"Error saving supplier")},async deleteSupplier(n){if(confirm(`Delete supplier "${n.name}"?`))try{const e=localStorage.getItem("admin_token");await this.$axios.delete(`/api/v1/suppliers/${n.id}`,{headers:{Authorization:`Bearer ${e}`}}),this.showSuccess("Supplier deleted successfully"),await this.loadSuppliers()}catch(e){this.handleApiError(e,"Error deleting supplier")}},viewSupplier(n){this.selectedSupplier=n,this.viewDialog=!0},formatCurrency(n){return n==null?"৳0.00":"৳"+new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}).format(n)},onPerPageChange(){this.resetPagination(),this.loadSuppliers()}}},Ie={class:"page-header"},Pe={class:"text-caption text-grey"},Ne={key:0},Te={class:"d-flex flex-column flex-md-row justify-space-between align-center align-md-start gap-3 mt-4"},Ae={class:"text-caption text-grey"},Oe={key:0},Me={key:1},Be={key:0,class:"d-flex align-center gap-2"};function ze(n,e,m,x,r,s){const g=a("v-btn"),f=a("v-select"),V=a("v-col"),u=a("v-text-field"),v=a("v-row"),k=a("v-card-text"),b=a("v-card"),w=a("v-card-title"),_=a("v-skeleton-loader"),E=a("v-chip"),C=a("v-table"),S=a("v-pagination"),F=a("SupplierViewDialog"),U=a("SupplierDialog");return h(),y("div",null,[l("div",Ie,[e[8]||(e[8]=l("h1",{class:"text-h4 page-title"},"Supplier Management",-1)),t(g,{color:"primary","prepend-icon":"mdi-plus",onClick:e[0]||(e[0]=d=>s.openDialog(null)),class:"add-button"},{default:o(()=>e[7]||(e[7]=[p(" Add New Supplier ")])),_:1,__:[7]})]),t(b,{class:"mb-4"},{default:o(()=>[t(k,null,{default:o(()=>[t(v,null,{default:o(()=>[t(V,{cols:"12",md:"3"},{default:o(()=>[t(f,{modelValue:n.perPage,"onUpdate:modelValue":[e[1]||(e[1]=d=>n.perPage=d),s.onPerPageChange],items:n.perPageOptions,label:"Items per page","prepend-inner-icon":"mdi-format-list-numbered",variant:"outlined",density:"compact"},null,8,["modelValue","items","onUpdate:modelValue"])]),_:1}),t(V,{cols:"12",md:"3"},{default:o(()=>[t(f,{modelValue:r.activeFilter,"onUpdate:modelValue":[e[2]||(e[2]=d=>r.activeFilter=d),s.loadSuppliers],items:r.activeOptions,label:"Filter by Status",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","items","onUpdate:modelValue"])]),_:1}),t(V,{cols:"12",md:"6"},{default:o(()=>[t(u,{modelValue:n.search,"onUpdate:modelValue":e[3]||(e[3]=d=>n.search=d),label:"Search by name, code, company, email, phone","prepend-inner-icon":"mdi-magnify",variant:"outlined",density:"compact",clearable:"",onInput:s.loadSuppliers},null,8,["modelValue","onInput"])]),_:1})]),_:1})]),_:1})]),_:1}),t(b,null,{default:o(()=>[t(w,{class:"d-flex justify-space-between align-center"},{default:o(()=>[e[10]||(e[10]=l("span",null,"Suppliers",-1)),l("span",Pe,[e[9]||(e[9]=p(" Total Records: ")),l("strong",null,c(n.pagination.total||0),1)])]),_:1,__:[10]}),t(k,null,{default:o(()=>[t(C,null,{default:o(()=>[e[12]||(e[12]=l("thead",null,[l("tr",null,[l("th",null,"Code"),l("th",null,"Name"),l("th",null,"Company"),l("th",null,"Email"),l("th",null,"Phone"),l("th",null,"City"),l("th",null,"Balance"),l("th",null,"Status"),l("th",null,"Actions")])],-1)),l("tbody",null,[n.loading?(h(),y(I,{key:0},A(5,d=>l("tr",{key:`skeleton-${d}`},[l("td",null,[t(_,{type:"text",width:"100"})]),l("td",null,[t(_,{type:"text",width:"150"})]),l("td",null,[t(_,{type:"text",width:"150"})]),l("td",null,[t(_,{type:"text",width:"150"})]),l("td",null,[t(_,{type:"text",width:"120"})]),l("td",null,[t(_,{type:"text",width:"100"})]),l("td",null,[t(_,{type:"text",width:"100"})]),l("td",null,[t(_,{type:"chip",width:"80",height:"24"})]),l("td",null,[t(_,{type:"button",width:"32",height:"32"})])])),64)):(h(),y(I,{key:1},[(h(!0),y(I,null,A(r.suppliers,d=>(h(),y("tr",{key:d.id},[l("td",null,c(d.code||"-"),1),l("td",null,c(d.name),1),l("td",null,c(d.company_name||"-"),1),l("td",null,c(d.email||"-"),1),l("td",null,c(d.phone||d.mobile||"-"),1),l("td",null,c(d.city||"-"),1),l("td",null,[t(E,{color:d.current_balance>=0?"success":"error",size:"small"},{default:o(()=>[p(c(s.formatCurrency(d.current_balance)),1)]),_:2},1032,["color"])]),l("td",null,[t(E,{color:d.is_active?"success":"error",size:"small"},{default:o(()=>[p(c(d.is_active?"Active":"Inactive"),1)]),_:2},1032,["color"])]),l("td",null,[t(g,{size:"small",icon:"mdi-eye",onClick:D=>s.viewSupplier(d),variant:"text",title:"View"},null,8,["onClick"]),t(g,{size:"small",icon:"mdi-pencil",onClick:D=>s.openDialog(d),variant:"text",title:"Edit"},null,8,["onClick"]),t(g,{size:"small",icon:"mdi-delete",onClick:D=>s.deleteSupplier(d),variant:"text",color:"error",title:"Delete"},null,8,["onClick"])])]))),128)),r.suppliers.length===0?(h(),y("tr",Ne,e[11]||(e[11]=[l("td",{colspan:"9",class:"text-center py-4"},"No suppliers found",-1)]))):N("",!0)],64))])]),_:1,__:[12]}),l("div",Te,[l("div",Ae,[r.suppliers.length>0&&n.pagination.total>0?(h(),y("span",Oe,[e[13]||(e[13]=p(" Showing ")),l("strong",null,c((n.currentPage-1)*n.perPage+1),1),e[14]||(e[14]=p(" to ")),l("strong",null,c(Math.min(n.currentPage*n.perPage,n.pagination.total)),1),e[15]||(e[15]=p(" of ")),l("strong",null,c(n.pagination.total.toLocaleString()),1),e[16]||(e[16]=p(" records "))])):(h(),y("span",Me,"No records found"))]),n.pagination.last_page>1?(h(),y("div",Be,[t(S,{modelValue:n.currentPage,"onUpdate:modelValue":[e[4]||(e[4]=d=>n.currentPage=d),s.loadSuppliers],length:n.pagination.last_page,"total-visible":7,density:"comfortable"},null,8,["modelValue","length","onUpdate:modelValue"])])):N("",!0)])]),_:1})]),_:1}),t(F,{modelValue:r.viewDialog,"onUpdate:modelValue":e[5]||(e[5]=d=>r.viewDialog=d),supplier:r.selectedSupplier},null,8,["modelValue","supplier"]),t(U,{modelValue:r.dialog,"onUpdate:modelValue":e[6]||(e[6]=d=>r.dialog=d),supplier:r.editingSupplier,onSave:s.handleSaveSuccess,onError:s.handleSaveError,onCancel:s.closeDialog},null,8,["modelValue","supplier","onSave","onError","onCancel"])])}const qe=T(De,[["render",ze],["__scopeId","data-v-63d0edb1"]]);export{qe as default};
