import{_ as R,d as g,w as t,a as l,r,b as y,f as i,t as n,e as V,i as k,o as w}from"./app-BqLCFCMY.js";const I={name:"AdminWarehouses",data(){return{warehouses:[],search:"",loading:!1,dialog:!1,viewDialog:!1,deleteDialog:!1,saving:!1,deleting:!1,formValid:!1,form:this.getEmptyForm(),selectedWarehouse:null,headers:[{title:"Name",key:"name"},{title:"Code",key:"code"},{title:"City",key:"city"},{title:"Phone",key:"phone"},{title:"Status",key:"is_active"},{title:"Created",key:"created_at"},{title:"Actions",key:"actions",sortable:!1,align:"center"}],rules:{required:a=>!!a||"Required"}}},computed:{filteredWarehouses(){if(!this.search)return this.warehouses;const a=this.search.toLowerCase();return this.warehouses.filter(e=>{var c,_,o;return((c=e.name)==null?void 0:c.toLowerCase().includes(a))||((_=e.code)==null?void 0:_.toLowerCase().includes(a))||((o=e.city)==null?void 0:o.toLowerCase().includes(a))})},isEdit(){return!!this.form.id}},mounted(){this.fetchWarehouses()},methods:{getEmptyForm(){return{id:null,name:"",code:"",phone:"",email:"",address:"",city:"",state:"",postal_code:"",country:"",is_active:!0}},async fetchWarehouses(){var a;this.loading=!0;try{const{data:e}=await k.get("/api/v1/warehouses");this.warehouses=e.data||e.warehouses||[]}catch(e){console.error("Failed to fetch warehouses",e),(a=this.$toast)==null||a.error("Failed to load warehouses")}finally{this.loading=!1}},openDialog(){this.form=this.getEmptyForm(),this.dialog=!0},editWarehouse(a){this.form={...a},this.dialog=!0},viewWarehouse(a){this.selectedWarehouse=a,this.viewDialog=!0},closeDialog(){this.dialog=!1,this.form=this.getEmptyForm()},async save(){var e,c,_;if((await this.$refs.formRef.validate()).valid){this.saving=!0;try{this.isEdit?(await k.put(`/api/v1/warehouses/${this.form.id}`,this.form),(e=this.$toast)==null||e.success("Warehouse updated successfully")):(await k.post("/api/v1/warehouses",this.form),(c=this.$toast)==null||c.success("Warehouse created successfully")),this.closeDialog(),this.fetchWarehouses()}catch(o){console.error("Failed to save warehouse",o),(_=this.$toast)==null||_.error("Failed to save warehouse")}finally{this.saving=!1}}},confirmDelete(a){this.form=a,this.deleteDialog=!0},async deleteWarehouse(){var a,e;this.deleting=!0;try{await k.delete(`/api/v1/warehouses/${this.form.id}`),(a=this.$toast)==null||a.success("Warehouse deleted successfully"),this.deleteDialog=!1,this.fetchWarehouses()}catch(c){console.error("Failed to delete warehouse",c),(e=this.$toast)==null||e.error("Failed to delete warehouse")}finally{this.deleting=!1}},formatDate(a){return a?new Date(a).toLocaleDateString():""}}},T={class:"d-flex align-center gap-2"};function G(a,e,c,_,o,u){const F=r("v-icon"),d=r("v-btn"),W=r("v-card-title"),x=r("v-divider"),f=r("v-text-field"),C=r("v-card-text"),U=r("v-chip"),N=r("v-data-table"),b=r("v-card"),m=r("v-col"),S=r("v-switch"),L=r("v-textarea"),z=r("v-row"),P=r("v-form"),A=r("v-card-actions"),D=r("v-dialog"),v=r("v-list-item-title"),p=r("v-list-item-subtitle"),h=r("v-list-item"),j=r("v-list"),q=r("v-spacer"),B=r("v-container");return w(),g(B,{fluid:""},{default:t(()=>[l(b,null,{default:t(()=>[l(W,{class:"d-flex justify-space-between align-center"},{default:t(()=>[y("div",T,[l(F,null,{default:t(()=>e[17]||(e[17]=[i("mdi-warehouse")])),_:1,__:[17]}),e[18]||(e[18]=y("span",{class:"text-h5"},"Warehouses",-1))]),l(d,{color:"primary","prepend-icon":"mdi-plus",onClick:u.openDialog},{default:t(()=>e[19]||(e[19]=[i("Add Warehouse")])),_:1,__:[19]},8,["onClick"])]),_:1}),l(x),l(C,null,{default:t(()=>[l(f,{modelValue:o.search,"onUpdate:modelValue":e[0]||(e[0]=s=>o.search=s),label:"Search Warehouses","prepend-inner-icon":"mdi-magnify",clearable:""},null,8,["modelValue"])]),_:1}),l(N,{headers:o.headers,items:u.filteredWarehouses,loading:o.loading,"items-per-page":15},{"item.is_active":t(({item:s})=>[l(U,{color:s.is_active?"success":"error",size:"small"},{default:t(()=>[i(n(s.is_active?"Active":"Inactive"),1)]),_:2},1032,["color"])]),"item.created_at":t(({item:s})=>[i(n(u.formatDate(s.created_at)),1)]),"item.actions":t(({item:s})=>[l(d,{icon:"mdi-eye",size:"small",variant:"text",onClick:E=>u.viewWarehouse(s)},null,8,["onClick"]),l(d,{icon:"mdi-pencil",size:"small",variant:"text",onClick:E=>u.editWarehouse(s)},null,8,["onClick"]),l(d,{icon:"mdi-delete",size:"small",variant:"text",color:"error",onClick:E=>u.confirmDelete(s)},null,8,["onClick"])]),_:1},8,["headers","items","loading"])]),_:1}),l(D,{modelValue:o.dialog,"onUpdate:modelValue":e[12]||(e[12]=s=>o.dialog=s),"max-width":"700px",persistent:""},{default:t(()=>[l(b,null,{default:t(()=>[l(W,{class:"d-flex justify-space-between align-center"},{default:t(()=>[y("span",null,n(u.isEdit?"Edit Warehouse":"Add Warehouse"),1),l(d,{icon:"mdi-close",variant:"text",onClick:u.closeDialog},null,8,["onClick"])]),_:1}),l(x),l(C,null,{default:t(()=>[l(P,{ref:"formRef",modelValue:o.formValid,"onUpdate:modelValue":e[11]||(e[11]=s=>o.formValid=s)},{default:t(()=>[l(z,{dense:""},{default:t(()=>[l(m,{cols:"12",sm:"8"},{default:t(()=>[l(f,{modelValue:o.form.name,"onUpdate:modelValue":e[1]||(e[1]=s=>o.form.name=s),label:"Warehouse Name *",rules:[o.rules.required]},null,8,["modelValue","rules"])]),_:1}),l(m,{cols:"12",sm:"4"},{default:t(()=>[l(S,{modelValue:o.form.is_active,"onUpdate:modelValue":e[2]||(e[2]=s=>o.form.is_active=s),label:"Active",color:"primary"},null,8,["modelValue"])]),_:1}),l(m,{cols:"12"},{default:t(()=>[l(f,{modelValue:o.form.code,"onUpdate:modelValue":e[3]||(e[3]=s=>o.form.code=s),label:"Warehouse Code",hint:"Unique identifier"},null,8,["modelValue"])]),_:1}),l(m,{cols:"12",sm:"6"},{default:t(()=>[l(f,{modelValue:o.form.phone,"onUpdate:modelValue":e[4]||(e[4]=s=>o.form.phone=s),label:"Phone"},null,8,["modelValue"])]),_:1}),l(m,{cols:"12",sm:"6"},{default:t(()=>[l(f,{modelValue:o.form.email,"onUpdate:modelValue":e[5]||(e[5]=s=>o.form.email=s),label:"Email",type:"email"},null,8,["modelValue"])]),_:1}),l(m,{cols:"12"},{default:t(()=>[l(L,{modelValue:o.form.address,"onUpdate:modelValue":e[6]||(e[6]=s=>o.form.address=s),label:"Address",rows:"2"},null,8,["modelValue"])]),_:1}),l(m,{cols:"12",sm:"4"},{default:t(()=>[l(f,{modelValue:o.form.city,"onUpdate:modelValue":e[7]||(e[7]=s=>o.form.city=s),label:"City"},null,8,["modelValue"])]),_:1}),l(m,{cols:"12",sm:"4"},{default:t(()=>[l(f,{modelValue:o.form.state,"onUpdate:modelValue":e[8]||(e[8]=s=>o.form.state=s),label:"State/Province"},null,8,["modelValue"])]),_:1}),l(m,{cols:"12",sm:"4"},{default:t(()=>[l(f,{modelValue:o.form.postal_code,"onUpdate:modelValue":e[9]||(e[9]=s=>o.form.postal_code=s),label:"Postal Code"},null,8,["modelValue"])]),_:1}),l(m,{cols:"12"},{default:t(()=>[l(f,{modelValue:o.form.country,"onUpdate:modelValue":e[10]||(e[10]=s=>o.form.country=s),label:"Country"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(x),l(A,{class:"justify-end"},{default:t(()=>[l(d,{variant:"text",onClick:u.closeDialog},{default:t(()=>e[20]||(e[20]=[i("Cancel")])),_:1,__:[20]},8,["onClick"]),l(d,{color:"primary",loading:o.saving,onClick:u.save},{default:t(()=>[i(n(u.isEdit?"Update":"Save"),1)]),_:1},8,["loading","onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(D,{modelValue:o.viewDialog,"onUpdate:modelValue":e[14]||(e[14]=s=>o.viewDialog=s),"max-width":"600px"},{default:t(()=>[o.selectedWarehouse?(w(),g(b,{key:0},{default:t(()=>[l(W,{class:"d-flex justify-space-between align-center bg-primary"},{default:t(()=>[e[21]||(e[21]=y("span",{class:"text-white"},"Warehouse Details",-1)),l(d,{icon:"mdi-close",variant:"text",class:"text-white",onClick:e[13]||(e[13]=s=>o.viewDialog=!1)})]),_:1,__:[21]}),l(C,{class:"pa-4"},{default:t(()=>[l(j,{density:"compact"},{default:t(()=>[l(h,null,{default:t(()=>[l(v,{class:"font-weight-bold"},{default:t(()=>e[22]||(e[22]=[i("Name")])),_:1,__:[22]}),l(p,null,{default:t(()=>[i(n(o.selectedWarehouse.name),1)]),_:1})]),_:1}),o.selectedWarehouse.code?(w(),g(h,{key:0},{default:t(()=>[l(v,{class:"font-weight-bold"},{default:t(()=>e[23]||(e[23]=[i("Code")])),_:1,__:[23]}),l(p,null,{default:t(()=>[i(n(o.selectedWarehouse.code),1)]),_:1})]),_:1})):V("",!0),o.selectedWarehouse.phone?(w(),g(h,{key:1},{default:t(()=>[l(v,{class:"font-weight-bold"},{default:t(()=>e[24]||(e[24]=[i("Phone")])),_:1,__:[24]}),l(p,null,{default:t(()=>[i(n(o.selectedWarehouse.phone),1)]),_:1})]),_:1})):V("",!0),o.selectedWarehouse.email?(w(),g(h,{key:2},{default:t(()=>[l(v,{class:"font-weight-bold"},{default:t(()=>e[25]||(e[25]=[i("Email")])),_:1,__:[25]}),l(p,null,{default:t(()=>[i(n(o.selectedWarehouse.email),1)]),_:1})]),_:1})):V("",!0),o.selectedWarehouse.address?(w(),g(h,{key:3},{default:t(()=>[l(v,{class:"font-weight-bold"},{default:t(()=>e[26]||(e[26]=[i("Address")])),_:1,__:[26]}),l(p,null,{default:t(()=>[i(n(o.selectedWarehouse.address),1),e[27]||(e[27]=y("br",null,null,-1)),i(" "+n(o.selectedWarehouse.city)+", "+n(o.selectedWarehouse.state)+" "+n(o.selectedWarehouse.postal_code),1),e[28]||(e[28]=y("br",null,null,-1)),i(" "+n(o.selectedWarehouse.country),1)]),_:1,__:[27,28]})]),_:1})):V("",!0),l(h,null,{default:t(()=>[l(v,{class:"font-weight-bold"},{default:t(()=>e[29]||(e[29]=[i("Status")])),_:1,__:[29]}),l(p,null,{default:t(()=>[l(U,{color:o.selectedWarehouse.is_active?"success":"error",size:"small"},{default:t(()=>[i(n(o.selectedWarehouse.is_active?"Active":"Inactive"),1)]),_:1},8,["color"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):V("",!0)]),_:1},8,["modelValue"]),l(D,{modelValue:o.deleteDialog,"onUpdate:modelValue":e[16]||(e[16]=s=>o.deleteDialog=s),"max-width":"400"},{default:t(()=>[l(b,null,{default:t(()=>[l(W,null,{default:t(()=>e[30]||(e[30]=[i("Confirm Delete")])),_:1,__:[30]}),l(C,null,{default:t(()=>e[31]||(e[31]=[i("Are you sure you want to delete this warehouse?")])),_:1,__:[31]}),l(A,null,{default:t(()=>[l(q),l(d,{onClick:e[15]||(e[15]=s=>o.deleteDialog=!1)},{default:t(()=>e[32]||(e[32]=[i("Cancel")])),_:1,__:[32]}),l(d,{color:"error",loading:o.deleting,onClick:u.deleteWarehouse},{default:t(()=>e[33]||(e[33]=[i("Delete")])),_:1,__:[33]},8,["loading","onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}const J=R(I,[["render",G]]);export{J as default};
